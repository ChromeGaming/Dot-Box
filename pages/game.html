<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Stylesheet -->
    <link rel="stylesheet" href="../styles/default.style.css" />
    <link rel="stylesheet" href="../styles/game.style.css" />

    <!-- JavaScript files -->
    <script defer src="../js/edge.js"></script>
    <script defer src="../js/box.js"></script>
    <script defer src="../js/board.js"></script>
    <script defer src="../js/game.js"></script>

    <!-- Logo of the game -->
    <link rel="icon" href="../assets/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="../assets/favicon.ico" type="image/x-icon" />
    <style>
        .back-home:visited {
            color: white;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .button-container button,
        .button-container a {
            background-color: rgb(0, 166, 255);
            color: white;
            border: none;
            padding: 13px 13px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            position: relative;
            transition: background-color 0.3s ease;
        }

        .button-container #sound-toggle {
            background-color: rgb(12, 1, 1);
            border-radius: 4px;
            padding: 10px 20px;
        }

        .button-container svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        .button-container a {
            text-decoration: none;
        }

        .button-container button:hover,
        .button-container a:hover {
            background-color: rgb(69, 133, 254);
        }

        .button-container #sound-toggle:hover {
            background-color: rgb(21, 39, 77);
        }


        .button-container [title]:hover::after {
            opacity: 1;
        }

        .circle {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            pointer-events: none;
            background: radial-gradient(circle, rgba(73, 232, 247, 0.466), rgba(141, 38, 172, 0.5));
            transition: transform 0.1s, left 0.1s, top 0.1s;
        }

        .circle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99999;
        }
        /* Score board */
        .game-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
}

.game-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

.scoreboard-container {
    position: absolute;
    left: 20px;
    top: 20px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    width: 250px;
    cursor: move;
    z-index: 1000;
}

.scoreboard-container h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #333;
}

.scoreboard {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.score {
    font-size: 22px;
    font-weight: bold;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.player1-score { background-color: rgba(255, 192, 203, 0.7); }
.player2-score { background-color: rgba(173, 216, 230, 0.7); }
.player3-score { background-color: rgba(144, 238, 144, 0.7); }
.player4-score { background-color: rgba(255, 0, 255, 0.7); }
.player5-score { background-color: rgba(255, 255, 0, 0.7); }
.player6-score { background-color: rgba(255, 165, 0, 0.7); }

        /* Tour */
        #tour-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .overlay-content ul {
            text-align: left;
            margin: 20px 0;
        }

        .tour-step {
            position: absolute;
            display: none;
            padding: 20px;
            border-radius: 8px;
            background: #fff0f5;
            color: #000;
            width: 314px;
        }

        .tour-step.step-1 {
            top: 20%;
            left: 40%;
            margin-top: -268px;
        }

        .tour-step.step-2 {
            top: 80%;
            left: 15%;
            margin-top: -16%;
        }

        .tour-step.step-3 {
            top: 20%;
            right: 59%;
            margin-top: -32%;
            width: 399px;
            padding: 20px;
        }

        .tour-step.step-4 {
            bottom: 30%;
            left: 58%;
            margin-bottom: -94px;
        }

        .tour-step.step-5 {
            top: 20%;
            left: 34%;
            margin-top: -67px;
            width: 340px;
        }

        .tour-step.step-6 {
            top: 20%;
            left: 37%;
            margin-top: -201px;
            width: 392px;
        }

        .tour-step.step-7 {
            top: 20%;
            right: 58%;
            margin-top: -31%;
            width: 399px;
            padding: 20px;
        }

        .tour-controls {
            position: absolute;
            bottom: -40px;
            width: 86%;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .tour-controls .button {
            background-color: rgb(0, 166, 255);
            color: white;
            border: none;
            padding: 5px 17px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .tour-controls .button:hover {
            background-color: rgb(69, 133, 254);
        }

        #prev-step {
            background-color: rgb(255, 165, 0);
        }

        #skip-tour {
            background-color: rgb(255, 0, 0);
        }

        .overlay-content .button-container {
            position: absolute;
            bottom: 10px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        /* Responsive styles for tablets and mobile devices */
        @media screen and (max-width: 768px) {
            .tour-step {
                width: 80%;
                padding: 15px;
            }

            .tour-step h3 {
                font-size: 1.2em;
            }

            .tour-step p {
                font-size: 0.9em;
            }

            .tour-controls .button {
                padding: 5px 10px;
                font-size: 0.9em;
            }

            .tour-controls {
                flex-direction: column;
                gap: 5px;
            }
        }

        @media screen and (max-width: 480px) {
            .tour-step.step-1 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
            }

            .tour-step.step-2 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
                margin-top: -39px;

            }

            .tour-step.step-3 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
                margin-top: -392px;
            }

            .tour-step.step-7 {
                width: 83%;
                padding: 10px;
                left: 65%;
                margin-left: -32%;
                margin-top: -339px;
            }

            .tour-step.step-4 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
                margin-bottom: 53px;
            }

            .tour-step.step-5 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
                margin-top: -119px;
            }

            .tour-step.step-6 {
                width: 83%;
                padding: 10px;
                left: 41%;
                margin-left: -32%;
                margin-top: -193px;
            }

            .tour-step .step-8 {
                top: 20%;
    right: 59%;
    margin-top: -32%;
    width: 399px;
    padding: 20px;
            }

            .tour-step h3 {
                font-size: 1em;
            }

            .tour-step p {
                font-size: 0.8em;
            }

            .tour-controls .button {
                padding: 5px 10px;
                font-size: 0.8em;
            }

            .tour-controls {
                flex-direction: column;
                gap: 3px;
                margin-bottom: -15%;
                margin-left: 8px;
            }

            .circle-container {
                display: none;
            }
        }

        #myVideo {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
        }
    </style>

    <!-- Title of the game -->
    <title>Dots & Boxes Game</title>
</head>

<body>
    <div class="circle-container">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const coords = { x: 0, y: 0 };
            const circles = document.querySelectorAll(".circle");

            circles.forEach(function (circle) {
                circle.x = 0;
                circle.y = 0;
            });

            window.addEventListener("mousemove", function (e) {
                coords.x = e.pageX;
                coords.y = e.pageY - window.scrollY; // Adjust for vertical scroll position
            });

            function animateCircles() {
                let x = coords.x;
                let y = coords.y;

                circles.forEach(function (circle, index) {
                    circle.style.left = `${x - 12}px`;
                    circle.style.top = `${y - 12}px`;
                    circle.style.transform = `scale(${(circles.length - index) / circles.length})`;

                    const nextCircle = circles[index + 1] || circles[0];
                    circle.x = x;
                    circle.y = y;

                    x += (nextCircle.x - x) * 0.3;
                    y += (nextCircle.y - y) * 0.3;
                });

                requestAnimationFrame(animateCircles);
            }

            animateCircles();
        });

    </script>

    <video autoplay muted class="video" loop id="myVideo" style="opacity: 0.95">
        <source src="/assets/videos/1.mp4" type="video/mp4" />
    </video>

    <!-- Players -->
    <div class="players"></div>

    <div class="player-turn">
        <div class="bg" style="margin-top: 40px">
            <span class="name">PlayerX</span>'s turn
        </div>
    </div>

    <!-- Game Page -->
    <div class="game-wrapper">
        <div class="scoreboard-container">
            <h2>Scoreboard</h2>
            <div class="scoreboard">
                <!-- Scoreboard content will be dynamically added here -->
            </div>
        </div>
        <div class="game-container">
            <div class="board"></div>
        </div>
    </div>

    <div class="button-container">
        <button id="sound-toggle" title="Toggle Sound">Sound Off</button>

        <a href="../pages/game.html" id="reset-button" title="Reset Game">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M0 0h24v24H0z" fill="none" />
                <path d="M13 3a9 9 0 0 0-9 9H1l4 4 4-4H5a7 7 0 1 1 7 7v2a9 9 0 0 0 0-18z" />
            </svg>
        </a>

        <a href="../index.html" class="back-home" title="Go Back Home">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                <path
                    d="M 25 1.0507812 C 24.7825 1.0507812 24.565859 1.1197656 24.380859 1.2597656 L 1.3808594 19.210938 C 0.95085938 19.550938 0.8709375 20.179141 1.2109375 20.619141 C 1.5509375 21.049141 2.1791406 21.129062 2.6191406 20.789062 L 4 19.710938 L 4 46 C 4 46.55 4.45 47 5 47 L 19 47 L 19 29 L 31 29 L 31 47 L 45 47 C 45.55 47 46 46.55 46 46 L 46 19.710938 L 47.380859 20.789062 C 47.570859 20.929063 47.78 21 48 21 C 48.3 21 48.589063 20.869141 48.789062 20.619141 C 49.129063 20.179141 49.049141 19.550938 48.619141 19.210938 L 25.619141 1.2597656 C 25.434141 1.1197656 25.2175 1.0507812 25 1.0507812 z M 35 5 L 35 6.0507812 L 41 10.730469 L 41 5 L 35 5 z">
                </path>
            </svg>
        </a>
    </div>

    <!-- Winner Overlay -->
    <div id="win-overlay" class="overlay">
        <!-- Overlay content -->
        <div class="overlay-content">
            <a href="../index.html">Go Back to Home</a>
            <a href="../pages/game.html">Play Again</a>
        </div>
    </div>

    <!-- Game Tour -->
    <div id="tour-overlay">
        <div class="overlay-content">
            <div class="tour-step step-1">
                <h3>Game Tour</h3>
                <p>Welcome to the Dot-box game presented by Chrome Gaming! <br><br> Dot-Box is a game where players take
                    turns drawing lines between dots to create boxes. The player who completes the most boxes wins. It's
                    a simple yet strategic game enjoyed by people of all ages. Click the "Next" button to start the
                    tour.</p>
                <div class="tour-controls">
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-2">
                <h3>Step 1</h3>
                <p>This is Game Board! This is where the game is displayed, Play here by connecting the lines.</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-3">
                <h3>Step 2</h3>
                <p>Here’s where the player’s score is displayed, Keep track of your score as you play the game</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-7">
                <h3>Step 3</h3>
                <p>Here you can see the player’s turn indicator.</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-7">
                <h3>Step 4</h3>
                <p>This the live dragable scorebaord. Hold and move to your desire place</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-4">
                <h3>Step 5</h3>
                <p>This is the home button. Click to go back to the homepage.</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-5">
                <h3>Step 6</h3>
                <p>This is the sound toggle button. Click to mute/unmute the sound. Besides it there is a reset/restart
                    button.</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="next-step" class="button">Next</button>
                    <button id="skip-tour" class="button">Skip Tour</button>
                </div>
            </div>

            <div class="tour-step step-6">
                <h3>Step 7</h3>
                <p>Now you are ready to start the game. Have fun!</p>
                <div class="tour-controls">
                    <button id="prev-step" class="button">Previous</button>
                    <button id="close-tour" class="button">Close Tour</button>
                </div>
            </div>
        </div>
    </div>

    <!-- tour steps -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const tourSteps = document.querySelectorAll(".tour-step");
            let currentStep = 0;

            const showStep = (index) => {
                tourSteps.forEach((step, i) => {
                    step.style.display = i === index ? "block" : "none";
                });
            };

            const nextStep = () => {
                if (currentStep < tourSteps.length - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            };

            const prevStep = () => {
                if (currentStep > 0) {
                    currentStep--;
                    showStep(currentStep);
                }
            };

            const skipTour = () => {
                document.getElementById("tour-overlay").style.display = "none";
            };

            const closeTour = () => {
                document.getElementById("tour-overlay").style.display = "none";
            };

            document.querySelectorAll("#next-step").forEach(button => {
                button.addEventListener("click", nextStep);
            });

            document.querySelectorAll("#prev-step").forEach(button => {
                button.addEventListener("click", prevStep);
            });

            document.querySelectorAll("#skip-tour").forEach(button => {
                button.addEventListener("click", skipTour);
            });

            document.querySelectorAll("#close-tour").forEach(button => {
                button.addEventListener("click", closeTour);
            });


            document.getElementById("tour-overlay").style.display = "flex";
            showStep(currentStep);
        });
    </script>

<button id="sound-toggle">
    <svg id="sound-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03zm2.5 0c0 2.89-1.54 5.38-3.86 6.71l1.43 1.43C19.16 18.84 21 15.61 21 12s-1.84-6.84-4.43-8.14l-1.43 1.43C17.46 6.62 19 9.11 19 12z" />
    </svg>
</button>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const soundToggle = document.getElementById('sound-toggle');
    const soundIcon = document.getElementById('sound-icon');
    const bgMusic = new Audio('/assets/sounds/bgMusic.mp3');
    const clickSound = new Audio('/assets/sounds/click.mp3');
    
    bgMusic.loop = true;

    // Play background music by default and set the initial icon
    bgMusic.play().then(() => {
        soundIcon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03zm2.5 0c0 2.89-1.54 5.38-3.86 6.71l1.43 1.43C19.16 18.84 21 15.61 21 12s-1.84-6.84-4.43-8.14l-1.43 1.43C17.46 6.62 19 9.11 19 12z" />';
    }).catch(error => {
        console.error('Audio playback failed:', error);
    });

    soundToggle.addEventListener('click', () => {
        if (bgMusic.paused || bgMusic.volume === 0) {
            bgMusic.play();
            bgMusic.volume = 1; // Ensure volume is set back to normal
            soundIcon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03zm2.5 0c0 2.89-1.54 5.38-3.86 6.71l1.43 1.43C19.16 18.84 21 15.61 21 12s-1.84-6.84-4.43-8.14l-1.43 1.43C17.46 6.62 19 9.11 19 12z" />';
        } else {
            bgMusic.pause();
            bgMusic.currentTime = 0; // Reset the audio to the beginning
            bgMusic.volume = 0; // Set the volume to 0
            soundIcon.innerHTML = '<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03zm2.5 0c0 2.89-1.54 5.38-3.86 6.71l1.43 1.43C19.16 18.84 21 15.61 21 12s-1.84-6.84-4.43-8.14l-1.43 1.43C17.46 6.62 19 9.11 19 12zM3.27 2L2 3.27 5.73 7H3v10h4l5 5V12.73l3 3V20h.73l3.73 3.73 1.27-1.27L3.27 2z" />';
        }
    });

    // Example function to play click sound
    function playClickSound() {
        clickSound.currentTime = 0; // Reset to start
        clickSound.play();
    }

    // Attach the click sound effect to relevant elements
    const clickableElements = document.querySelectorAll('.clickable');
    clickableElements.forEach(element => {
        element.addEventListener('click', playClickSound);
    });
});
</script>


</body>

</html>